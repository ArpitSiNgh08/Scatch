<%- include('./partials/header') %>
<div class="w-full min-h-screen flex items-start px-20 py-20 gap-10">
    <div class="w-[50%] flex flex-col gap-8">
        <% user.cart.forEach(function(item){ %>
            <div class="rounded-md overflow-hidden shadow bg-white flex flex-col">
                <div class="w-full h-60 flex items-center justify-center bg-[<%= item.bgcolor %>]">
                    <img class="h-[12rem]" src="data:image/jpeg;base64,<%= item.image.toString('base64') %>">
                </div>
                <div class="flex flex-col gap-2 px-5 py-4 bg-[<%= item.panelcolor %>] text-[<%= item.textcolor %>]">
                    <h3 class="text-2xl font-bold"><%= item.name %></h3>
                    <div class="flex justify-between">
                        <span>Price:</span>
                        <span>₹ <%= item.price %></span>
                    </div>
                    <div class="flex justify-between">
                        <span>Discount:</span>
                        <span>₹ <%= item.discount %></span>
                    </div>
                    <div class="flex justify-between">
                        <span>Platform Fee:</span>
                        <span>₹ 20</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Subtotal:</span>
                        <span>
                            ₹ <%= Number(item.price) + 20 - Number(item.discount) %>
                        </span>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>
    <div class="w-[30%]">
        <h3 class="text-xl mb-4">Total Price Breakdown</h3>
        <div class="px-6 py-4 bg-white rounded shadow">
            <div class="flex justify-between mb-2">
                <span>Total MRP</span>
                <span>₹ <%= user.cart.reduce((sum, item) => sum + Number(item.price), 0) %></span>
            </div>
            <div class="flex justify-between mb-2">
                <span>Total Discount</span>
                <span>₹ <%= user.cart.reduce((sum, item) => sum + Number(item.discount), 0) %></span>
            </div>
            <div class="flex justify-between mb-2">
                <span>Platform Fee</span>
                <span>₹ <%= user.cart.length * 20 %></span>
            </div>
            <div class="flex justify-between mb-2">
                <span>Shipping Fee</span>
                <span>FREE</span>
            </div>
            <div class="border-t my-2"></div>
            <div class="flex justify-between font-bold text-green-700">
                <span>Total Amount</span>
                <span>₹ <%= bill %></span>
            </div>
        </div>
    </div>
</div>
<%- include('./partials/footer') %>